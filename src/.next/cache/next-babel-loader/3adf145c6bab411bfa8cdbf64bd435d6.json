{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport Link from 'next/link';\nimport Router from 'next/router';\nimport { loginUser, loginUserFacebook } from '../../redux/actions/authActions';\nimport TextFieldGroup from '../common/TextFieldGroup';\nimport Separator from '../common/Separator';\nimport { isEmpty } from '../../utils/Util';\n\nvar Login =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Login, _Component);\n\n  function Login() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Login);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Login)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      email: '',\n      password: '',\n      errors: {}\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onChange\", function (e) {\n      _this.setState(_defineProperty({}, e.target.name, e.target.value));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSubmit\", function (e) {\n      e.preventDefault();\n      var user = {\n        username: _this.state.email,\n        password: _this.state.password\n      };\n\n      var res = _this.props.loginUser(user);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"facebookLogin\",\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              // const res = await this.props.loginUserFacebook();\n              // console.log('From Client:');\n              // console.log(res);\n              Router.push('/api/auth/facebook');\n\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    })));\n\n    return _this;\n  }\n\n  _createClass(Login, [{\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps, nextState) {\n      if (!this.props.auth.isAuthenticated && nextProps.auth.isAuthenticated) {\n        return false;\n      } else {\n        return true;\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.props.isAuthenticated) {\n        Router.push('/dashboard');\n      }\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(newProps) {\n      if (newProps.auth.isAuthenticated) {\n        Router.push('/dashboard');\n      }\n\n      if (newProps.auth.errors) {\n        this.setState({\n          errors: newProps.auth.errors\n        });\n      }\n    }\n  }, {\n    key: \"renderAlreadyLoggedIn\",\n    value: function renderAlreadyLoggedIn() {\n      return React.createElement(\"div\", null, React.createElement(\"h2\", {\n        className: \"display-4 text-center mb-5\"\n      }, \"You're already logged in\"), React.createElement(\"p\", null, \"Were you looking for the\", React.createElement(Link, {\n        href: \"/logout\"\n      }, React.createElement(\"a\", null, \"Dashboard?\"))));\n    }\n  }, {\n    key: \"renderLoginForm\",\n    value: function renderLoginForm() {\n      var errors = this.state.errors;\n      return React.createElement(\"div\", null, React.createElement(\"h1\", {\n        className: \"display-4 text-center mb-5\"\n      }, \"Login to your account\"), React.createElement(\"form\", {\n        noValidate: true,\n        onSubmit: this.onSubmit\n      }, React.createElement(TextFieldGroup, {\n        name: \"email\",\n        placeholder: \"Email Address\",\n        type: \"email\",\n        value: this.state.email,\n        onChange: this.onChange,\n        error: errors.email\n      }), React.createElement(TextFieldGroup, {\n        name: \"password\",\n        placeholder: \"Password\",\n        type: \"password\",\n        value: this.state.password,\n        onChange: this.onChange,\n        error: errors.password\n      }), React.createElement(\"input\", {\n        type: \"submit\",\n        className: \"btn btn-warning btn-block mt-4 mb-4 border border-dark\",\n        value: \"Log in\"\n      })), isEmpty(this.state.errors) ? '' : React.createElement(\"div\", {\n        className: \"text-center\"\n      }, React.createElement(Link, {\n        href: \"/password/reset\"\n      }, React.createElement(\"a\", null, \"Forgot your password?\"))), React.createElement(\"div\", {\n        className: \"text-center\"\n      }, React.createElement(Separator, {\n        color: \"dark-gray\",\n        marginTop: \"4\",\n        marginBottom: \"2\",\n        length: \"12\"\n      }), React.createElement(\"p\", null, \"Or login with:\"), React.createElement(Link, {\n        href: \"/api/auth/facebook\"\n      }, React.createElement(\"button\", {\n        className: \"border-0 mx-2\"\n      }, React.createElement(\"i\", {\n        className: \"fab fa-facebook-square fa-4x text-primary\"\n      }))), React.createElement(Link, {\n        href: \"/api/auth/steam\"\n      }, React.createElement(\"button\", {\n        className: \"border-0 mx-2 p-0\"\n      }, React.createElement(\"i\", {\n        className: \"fab fa-steam-square fa-4x text-dark\"\n      })))));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var isAuthenticated = this.props.auth.isAuthenticated;\n      return React.createElement(\"div\", {\n        className: \"login mt-3 full-height\"\n      }, React.createElement(\"div\", {\n        className: \"container\"\n      }, React.createElement(\"div\", {\n        className: \"row\"\n      }, React.createElement(\"div\", {\n        className: \"col-10 col-md-8 col-lg-6 m-auto\"\n      }, isAuthenticated ? this.renderAlreadyLoggedIn() : this.renderLoginForm()))));\n    }\n  }]);\n\n  return Login;\n}(Component);\n\nLogin.propTypes = {\n  loginUser: PropTypes.func.isRequired,\n  auth: PropTypes.object.isRequired\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    auth: state.auth\n  };\n};\n\nexport default connect(mapStateToProps, {\n  loginUser: loginUser,\n  loginUserFacebook: loginUserFacebook\n})(Login); // export default connect(mapStateToProps)(Login);","map":{"version":3,"sources":["/Users/ivan/Documents/Developer/Portfolio-Projects/mypubgsquad/mypubgsquad-next/src/components/login_page/Login.js"],"names":["React","Component","PropTypes","connect","Link","Router","loginUser","loginUserFacebook","TextFieldGroup","Separator","isEmpty","Login","email","password","errors","e","setState","target","name","value","preventDefault","user","username","state","res","props","push","nextProps","nextState","auth","isAuthenticated","newProps","onSubmit","onChange","renderAlreadyLoggedIn","renderLoginForm","propTypes","func","isRequired","object","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport Link from 'next/link';\nimport Router from 'next/router';\nimport { loginUser, loginUserFacebook } from '../../redux/actions/authActions';\nimport TextFieldGroup from '../common/TextFieldGroup';\nimport Separator from '../common/Separator';\nimport { isEmpty } from '../../utils/Util';\n\nclass Login extends Component {\n  state = {\n    email: '',\n    password: '',\n    errors: {}\n  };\n\n  onChange = e => {\n    this.setState({ [e.target.name]: e.target.value });\n  };\n\n  onSubmit = e => {\n    e.preventDefault();\n    const user = {\n      username: this.state.email,\n      password: this.state.password\n    };\n\n    const res = this.props.loginUser(user);\n  };\n\n  facebookLogin = async () => {\n    // const res = await this.props.loginUserFacebook();\n    // console.log('From Client:');\n    // console.log(res);\n    Router.push('/api/auth/facebook');\n  };\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if (!this.props.auth.isAuthenticated && nextProps.auth.isAuthenticated) {\n      return false;\n    } else {\n      return true;\n    }\n  }\n\n  componentDidMount() {\n    if (this.props.isAuthenticated) {\n      Router.push('/dashboard');\n    }\n  }\n\n  componentWillReceiveProps(newProps) {\n    if (newProps.auth.isAuthenticated) {\n      Router.push('/dashboard');\n    }\n\n    if (newProps.auth.errors) {\n      this.setState({ errors: newProps.auth.errors });\n    }\n  }\n\n  renderAlreadyLoggedIn() {\n    return (\n      <div>\n        <h2 className=\"display-4 text-center mb-5\">You're already logged in</h2>\n        <p>\n          Were you looking for the\n          <Link href=\"/logout\">\n            <a>Dashboard?</a>\n          </Link>\n        </p>\n      </div>\n    );\n  }\n\n  renderLoginForm() {\n    const { errors } = this.state;\n    return (\n      <div>\n        <h1 className=\"display-4 text-center mb-5\">Login to your account</h1>\n        <form noValidate onSubmit={this.onSubmit}>\n          <TextFieldGroup\n            name=\"email\"\n            placeholder=\"Email Address\"\n            type=\"email\"\n            value={this.state.email}\n            onChange={this.onChange}\n            error={errors.email}\n          />\n          <TextFieldGroup\n            name=\"password\"\n            placeholder=\"Password\"\n            type=\"password\"\n            value={this.state.password}\n            onChange={this.onChange}\n            error={errors.password}\n          />\n          <input\n            type=\"submit\"\n            className=\"btn btn-warning btn-block mt-4 mb-4 border border-dark\"\n            value=\"Log in\"\n          />\n        </form>\n        {isEmpty(this.state.errors) ? (\n          ''\n        ) : (\n          <div className=\"text-center\">\n            <Link href=\"/password/reset\">\n              <a>Forgot your password?</a>\n            </Link>\n          </div>\n        )}\n        <div className=\"text-center\">\n          <Separator color=\"dark-gray\" marginTop=\"4\" marginBottom=\"2\" length=\"12\" />\n          <p>Or login with:</p>\n          <Link href=\"/api/auth/facebook\">\n            <button className=\"border-0 mx-2\">\n              <i className=\"fab fa-facebook-square fa-4x text-primary\" />\n            </button>\n          </Link>\n\n          {/* <button className=\"border-0 mx-2\">\n            <i className=\"fab fa-twitter-square fa-4x text-info\" />\n          </button> */}\n          <Link href=\"/api/auth/steam\">\n            <button className=\"border-0 mx-2 p-0\">\n              <i className=\"fab fa-steam-square fa-4x text-dark\" />\n            </button>\n          </Link>\n        </div>\n      </div>\n    );\n  }\n\n  render() {\n    const { isAuthenticated } = this.props.auth;\n\n    return (\n      <div className=\"login mt-3 full-height\">\n        <div className=\"container\">\n          <div className=\"row\">\n            <div className=\"col-10 col-md-8 col-lg-6 m-auto\">\n              {isAuthenticated ? this.renderAlreadyLoggedIn() : this.renderLoginForm()}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nLogin.propTypes = {\n  loginUser: PropTypes.func.isRequired,\n  auth: PropTypes.object.isRequired\n};\n\nconst mapStateToProps = state => ({\n  auth: state.auth\n});\n\nexport default connect(\n  mapStateToProps,\n  { loginUser, loginUserFacebook }\n)(Login);\n\n// export default connect(mapStateToProps)(Login);\n"]},"metadata":{},"sourceType":"module"}