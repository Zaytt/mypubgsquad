{"ast":null,"code":"import axios from 'axios';\nimport { GET_PLAYER_SEASONS, LOADING_STATS, SET_GAME_MODE, SET_SEASON, SET_PERSPECTIVE, SET_ERROR } from './types'; // Get the individual info of each of the squad members\n\nexport var getPlayerSeasons = function getPlayerSeasons(squad, seasonid, refresh) {\n  return function (dispatch, getState) {\n    dispatch(setStatsLoading());\n\n    if (squad.split(',').length < 2) {\n      dispatch({\n        type: SET_ERROR,\n        payload: 'InsufficientPlayers'\n      });\n    } else {\n      axios.get('/api/stats', {\n        params: {\n          squad: squad,\n          seasonid: seasonid,\n          refresh: refresh\n        }\n      }).then(function (res) {\n        var payload = {\n          stats: res.data,\n          players: res.data.map(function (p) {\n            return p.relationships.player.attributes.name;\n          }),\n          season: res.data[0].relationships.season.id\n        };\n        dispatch({\n          type: GET_PLAYER_SEASONS,\n          payload: payload\n        });\n      })[\"catch\"](function (err) {\n        dispatch({\n          type: SET_ERROR,\n          payload: err.response.data\n        });\n      });\n    }\n  };\n};\nexport var setGameMode = function setGameMode(mode) {\n  return function (dispatch) {\n    dispatch({\n      type: SET_GAME_MODE,\n      payload: mode\n    });\n  };\n};\nexport var setPerspective = function setPerspective(perspective) {\n  return function (dispatch) {\n    dispatch({\n      type: SET_PERSPECTIVE,\n      payload: perspective\n    });\n  };\n};\nexport var getCurrentSeason = function getCurrentSeason() {\n  return function (dispatch) {\n    axios.get('/api/seasons/current').then(function (res) {\n      dispatch({\n        type: SET_SEASON,\n        payload: res.data.id\n      });\n    })[\"catch\"](function (err) {\n      dispatch({\n        type: SET_SEASON,\n        payload: ''\n      });\n    });\n  };\n};\nexport var setStatsLoading = function setStatsLoading() {\n  return {\n    type: LOADING_STATS\n  };\n};","map":null,"metadata":{},"sourceType":"module"}